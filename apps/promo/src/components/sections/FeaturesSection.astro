---
import { useTranslations } from '../../utils/i18n';
import Container from '../ui/Container.astro';
import Card from '../ui/Card.astro';
import Button from '../ui/Button.astro';
import { Check } from '@lucide/astro';

interface Props {
  lang: string;
}

const { lang } = Astro.props;

const translations = {
  en: {
    overline: 'Powerful Features',
    headline: 'Everything you need to succeed',
    subheadline: 'Our platform provides all the tools and features you need to build, deploy, and scale your web applications with confidence.',
    features: [
      {
        icon: '‚ö°',
        title: 'Lightning Fast',
        description: 'Optimized for speed with zero-configuration performance out of the box. Ship faster with our intelligent build system.',
        benefits: ['Sub-second builds', 'Instant hot reloads', 'Edge deployment']
      },
      {
        icon: 'üîí',
        title: 'Enterprise Security',
        description: 'Bank-level security with SOC 2 compliance, end-to-end encryption, and advanced threat protection.',
        benefits: ['SOC 2 Type II', 'GDPR compliant', '99.9% uptime SLA']
      },
      {
        icon: 'üöÄ',
        title: 'Scale Automatically',
        description: 'From prototype to production, our platform scales with you. Handle millions of users without breaking a sweat.',
        benefits: ['Auto-scaling', 'Global CDN', 'Load balancing']
      },
      {
        icon: 'üõ†Ô∏è',
        title: 'Developer Experience',
        description: 'Built by developers, for developers. Intuitive APIs, comprehensive docs, and world-class developer tools.',
        benefits: ['TypeScript support', 'Hot reloading', 'Rich ecosystem']
      },
      {
        icon: 'üéØ',
        title: 'SEO Optimized',
        description: 'Built-in SEO optimization with automatic sitemaps, meta tags, and structured data for better search rankings.',
        benefits: ['Meta tag management', 'Schema markup', 'Core Web Vitals']
      },
      {
        icon: 'üåç',
        title: 'Global Reach',
        description: 'Deploy to 300+ edge locations worldwide. Deliver content to your users with minimal latency.',
        benefits: ['300+ edge locations', 'Smart routing', 'Geographic failover']
      }
    ],
    viewAllFeatures: 'View All Features',
    learnMore: 'Learn More'
  },
  de: {
    overline: 'Leistungsstarke Funktionen',
    headline: 'Alles was Sie zum Erfolg brauchen',
    subheadline: 'Unsere Plattform bietet alle Tools und Funktionen, die Sie ben√∂tigen, um Ihre Webanwendungen mit Vertrauen zu erstellen, bereitzustellen und zu skalieren.',
    features: [
      {
        icon: '‚ö°',
        title: 'Blitzschnell',
        description: 'F√ºr Geschwindigkeit optimiert mit Zero-Configuration-Performance direkt aus der Box. Versenden Sie schneller mit unserem intelligenten Build-System.',
        benefits: ['Sub-Sekunden Builds', 'Sofortige Hot Reloads', 'Edge Deployment']
      },
      {
        icon: 'üîí',
        title: 'Enterprise Sicherheit',
        description: 'Bank-Level-Sicherheit mit SOC 2-Compliance, End-to-End-Verschl√ºsselung und erweitertem Bedrohungsschutz.',
        benefits: ['SOC 2 Type II', 'DSGVO konform', '99,9% Verf√ºgbarkeits-SLA']
      },
      {
        icon: 'üöÄ',
        title: 'Automatische Skalierung',
        description: 'Vom Prototyp bis zur Produktion skaliert unsere Plattform mit Ihnen. Bew√§ltigen Sie Millionen von Benutzern m√ºhelos.',
        benefits: ['Auto-Skalierung', 'Globales CDN', 'Load Balancing']
      },
      {
        icon: 'üõ†Ô∏è',
        title: 'Entwicklererfahrung',
        description: 'Von Entwicklern f√ºr Entwickler erstellt. Intuitive APIs, umfassende Dokumentation und erstklassige Entwicklertools.',
        benefits: ['TypeScript Support', 'Hot Reloading', 'Reiches √ñkosystem']
      },
      {
        icon: 'üéØ',
        title: 'SEO Optimiert',
        description: 'Eingebaute SEO-Optimierung mit automatischen Sitemaps, Meta-Tags und strukturierten Daten f√ºr bessere Suchrankings.',
        benefits: ['Meta Tag Management', 'Schema Markup', 'Core Web Vitals']
      },
      {
        icon: 'üåç',
        title: 'Globale Reichweite',
        description: 'Bereitstellung an √ºber 300 Edge-Standorten weltweit. Liefern Sie Inhalte an Ihre Benutzer mit minimaler Latenz.',
        benefits: ['300+ Edge-Standorte', 'Smart Routing', 'Geografisches Failover']
      }
    ],
    viewAllFeatures: 'Alle Funktionen anzeigen',
    learnMore: 'Mehr erfahren'
  },
};

const $t = useTranslations(translations, lang);
---

<section class="features-section section" data-section="features">
  <Container size="xl">
    <!-- Section Header -->
    <div class="features-header text-center">
      <div class="features-overline" data-animate="fade-up">
        <span class="text-overline gradient-text">{$t('overline')}</span>
      </div>

      <h2 class="features-headline" data-animate="fade-up" data-delay="100">
        {$t('headline')}
      </h2>

      <p class="features-subheadline text-body-large" data-animate="fade-up" data-delay="200">
        {$t('subheadline')}
      </p>
    </div>

    <!-- Features Grid -->
    <div class="features-grid" data-animate="stagger-up" data-delay="400">
      {$t('features').map((feature: any, index: number) => (
        <Card
          variant="default"
          class={`feature-card hover-lift`}
          data-animate="fade-up"
          data-delay={500 + (index * 100)}
        >
          <div class="feature-content">
            <div class="feature-icon-wrapper">
              <div class="feature-icon">{feature.icon}</div>
              <div class="feature-icon-bg"></div>
            </div>

            <div class="feature-text">
              <h3 class="feature-title text-heading-medium">{feature.title}</h3>
              <p class="feature-description text-body-small">{feature.description}</p>

              <ul class="feature-benefits">
                {feature.benefits.map((benefit: string) => (
                  <li class="feature-benefit">
                    <Check size={16} class="benefit-icon" />
                    <span>{benefit}</span>
                  </li>
                ))}
              </ul>
            </div>
          </div>
        </Card>
      ))}
    </div>

    <!-- Features CTA -->
    <div class="features-cta text-center" data-animate="fade-up" data-delay="800">
      <Button variant="ghost" size="lg" href="/features">
        {$t('viewAllFeatures')}
      </Button>
    </div>
  </Container>

  <!-- Background Elements -->
  <div class="features-background" aria-hidden="true">
    <div class="features-pattern"></div>
  </div>
</section>

<style>
  /* Features Section */
  .features-section {
    background: var(--color-background-secondary);
    position: relative;
    overflow: hidden;
  }

  /* Section Header */
  .features-header {
    max-width: 768px;
    margin: 0 auto var(--space-16);
  }

  .features-overline {
    margin-bottom: var(--space-4);
  }

  .features-headline {
    font-size: clamp(2rem, 4vw, 3rem);
    font-weight: 700;
    margin-bottom: var(--space-6);
    color: var(--color-text-primary);
  }

  .features-subheadline {
    color: var(--color-text-secondary);
    max-width: 600px;
    margin: 0 auto;
  }

  /* Features Grid */
  .features-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
    gap: var(--space-8);
    margin-bottom: var(--space-16);
  }

  .feature-card {
    height: 100%;
    transition: all var(--duration-normal) var(--ease-out);
  }

  .feature-content {
    height: 100%;
    display: flex;
    flex-direction: column;
  }

  /* Feature Icon */
  .feature-icon-wrapper {
    position: relative;
    width: 80px;
    height: 80px;
    margin-bottom: var(--space-6);
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .feature-icon {
    font-size: 2.5rem;
    position: relative;
    z-index: 2;
  }

  .feature-icon-bg {
    position: absolute;
    inset: 0;
    background: var(--gradient-primary);
    border-radius: 50%;
    opacity: 0.1;
    transition: opacity var(--duration-normal) var(--ease-out);
  }

  .feature-card:hover .feature-icon-bg {
    opacity: 0.2;
  }

  /* Feature Text */
  .feature-text {
    flex: 1;
    display: flex;
    flex-direction: column;
  }

  .feature-title {
    margin-bottom: var(--space-4);
    color: var(--color-text-primary);
  }

  .feature-description {
    margin-bottom: var(--space-6);
    color: var(--color-text-secondary);
    flex: 1;
  }

  /* Feature Benefits */
  .feature-benefits {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    flex-direction: column;
    gap: var(--space-3);
  }

  .feature-benefit {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    font-size: 14px;
    color: var(--color-text-secondary);
  }

  .benefit-icon {
    color: var(--color-accent-green);
    flex-shrink: 0;
  }

  /* Features CTA */
  .features-cta {
    margin-top: var(--space-12);
  }

  /* Background Elements */
  .features-background {
    position: absolute;
    inset: 0;
    pointer-events: none;
    z-index: 1;
  }

  .features-pattern {
    position: absolute;
    inset: 0;
    background-image:
      radial-gradient(circle at 20% 20%, rgba(139, 92, 246, 0.1) 0%, transparent 50%),
      radial-gradient(circle at 80% 80%, rgba(236, 72, 153, 0.1) 0%, transparent 50%);
  }

  /* Responsive Design */
  @media (max-width: 768px) {
    .features-grid {
      grid-template-columns: 1fr;
      gap: var(--space-6);
      margin-bottom: var(--space-12);
    }

    .feature-icon-wrapper {
      width: 60px;
      height: 60px;
      margin-bottom: var(--space-4);
    }

    .feature-icon {
      font-size: 2rem;
    }
  }

  /* Dark Mode Adjustments */
  [data-theme="dark"] .features-section {
    background: var(--color-background-primary);
  }

  [data-theme="dark"] .features-pattern {
    background-image:
      radial-gradient(circle at 20% 20%, rgba(167, 139, 250, 0.05) 0%, transparent 50%),
      radial-gradient(circle at 80% 80%, rgba(244, 114, 182, 0.05) 0%, transparent 50%);
  }

  /* Reduced Motion */
  @media (prefers-reduced-motion: reduce) {
    .feature-card {
      transition: none;
    }

    .feature-icon-bg {
      transition: none;
    }
  }

  /* Focus States */
  .feature-card:focus-within {
    outline: 2px solid var(--color-primary-blue);
    outline-offset: 2px;
  }
</style>

<!-- Animations handled by GSAP ScrollTrigger through centralized animation system -->